* TODO Compare streaming and HIPI
* TODO HIPI
  See [[http://hipi.cs.virginia.edu/][here]]; especially [[http://hipi.cs.virginia.edu/examples/downloader.html][here]].
* TODO Streaming
  #+BEGIN_SRC sh :comments link :tangle download-images.sh :shebang #!/usr/bin/env bash
  
  #+END_SRC
* TODO Crawler
  Letâ€™s crawl from an arbitrary site (e.g. [[http://www.apple.com/][apple]]), sluping images and
  visiting linked sites.
* TODO Get some images
  #+BEGIN_SRC scheme :comments link :tangle crawl.scm :shebang #!/usr/bin/env chicken-scheme
    (use debug
         http-client
         html-parser
         sxpath
         sxpath-lolevel
         sxml-transforms
         uri-common)
    
    (let ((images (make-parameter '())))
      (let iter ((horizon (make-parameter '("http://www.apple.com")))
                 (explore (make-parameter '()))
                 (time 0))
        (if (or (null? horizon) (> time 10))
            (images)
            (let* ((url (car (horizon)))
                   (document (with-input-from-request
                              "http://www.apple.com"
                              #f
                              html->sxml)))
              (let ((links (make-parameter '())))
                (pre-post-order
                 document
                 `((*default* . ,(lambda node node))
                   (img . ,(lambda node (images (cons (sxml:text (sxml:attr node 'src))
                                                 (images)))))
                   (a . ,(lambda node (links (cons (sxml:text (sxml:attr node 'href))
                                              (links)))))))
                (values (images)
                        (filter (compose absolute-uri? uri-reference) (links))))))))
  #+END_SRC

  Notion of roots and depth from roots?
